
{% extends 'base.html' %}

{% block title %}{{ pastorate.name }} Pastorate - RuweHolyGhostChurch{% endblock %}

{% block page_title %}{{ pastorate.name }} Pastorate{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- Pastorate Information Card -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title">
                    <i class="fas fa-users" style="color: #dc2626; margin-right: 10px;"></i>
                    Pastorate Information
                </h5>
                <div style="float: right;">
                    <a href="{% url 'church_structure:edit_pastorate' pastorate_slug=pastorate.slug %}" 
                       class="btn btn-primary btn-sm">
                        <i class="fas fa-edit"></i> Edit Pastorate
                    </a>
                    {% if pastorate.has_detailed_description %}
                    <a href="{% url 'church_structure:pastorate_description' pastorate_slug=pastorate.slug %}" 
                       class="btn btn-info btn-sm">
                        <i class="fas fa-book-open"></i> About Pastorate
                    </a>
                    {% endif %}
                    <a href="{% url 'church_structure:diocese_detail' diocese_slug=pastorate.diocese.slug %}" 
                       class="btn btn-primary btn-sm">
                        <i class="fas fa-church"></i> View Diocese
                    </a>
                    <a href="{% url 'church_structure:index' %}" class="btn btn-secondary btn-sm">
                        <i class="fas fa-arrow-left"></i> Back
                    </a>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Identifier:</strong> <span style="color: #22c55e; font-weight: bold;">{{ pastorate.identifier }}</span></p>
                        <p><strong>Name:</strong> {{ pastorate.name }}</p>
                        <p><strong>Diocese:</strong> 
                            <a href="{% url 'church_structure:diocese_detail' diocese_slug=pastorate.diocese.slug %}" 
                               style="color: #dc2626; text-decoration: none;">
                                {{ pastorate.diocese.name }} ({{ pastorate.diocese.country }})
                            </a>
                            <br><small style="color: #9ca3af;">ID: {{ pastorate.diocese.identifier }}</small>
                        </p>
                        <p><strong>Pastor:</strong> {{ pastorate.pastor_name }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Pastor Phone:</strong> {{ pastorate.pastor_phone|default:"Not provided" }}</p>
                        <p><strong>Pastor Email:</strong> {{ pastorate.pastor_email|default:"Not provided" }}</p>
                        <p><strong>Established:</strong> {{ pastorate.established_date|default:"Not specified" }}</p>
                    </div>
                </div>
                {% if pastorate.description %}
                <div class="row mt-3">
                    <div class="col-12">
                        <p><strong>Description:</strong></p>
                        <p>{{ pastorate.description }}</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Church Hierarchy Information -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title">
                    <i class="fas fa-sitemap" style="color: #dc2626; margin-right: 10px;"></i>
                    Church Hierarchy Information
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- Archbishop Information -->
                    <div class="col-md-6 mb-3">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 6px; border-left: 4px solid #dc2626;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-crown" style="color: #fbbf24; margin-right: 8px;"></i>
                                Archbishop
                            </h6>
                            {% if archbishop %}
                                <p style="color: #e5e7eb; margin-bottom: 5px;">
                                    <strong>{{ archbishop.full_name }}</strong>
                                </p>
                                {% if archbishop.phone %}
                                <p style="color: #9ca3af; margin-bottom: 5px;">
                                    <i class="fas fa-phone" style="margin-right: 5px;"></i>
                                    {{ archbishop.phone }}
                                </p>
                                {% endif %}
                                {% if archbishop.email %}
                                <p style="color: #9ca3af; margin-bottom: 0;">
                                    <i class="fas fa-envelope" style="margin-right: 5px;"></i>
                                    {{ archbishop.email }}
                                </p>
                                {% endif %}
                            {% else %}
                                <p style="color: #9ca3af; font-style: italic;">
                                    <i class="fas fa-info-circle" style="margin-right: 5px;"></i>
                                    Archbishop information not available
                                </p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Headquarters Information -->
                    <div class="col-md-6 mb-3">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 6px; border-left: 4px solid #7c3aed;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-landmark" style="color: #7c3aed; margin-right: 8px;"></i>
                                Headquarters
                            </h6>
                            <p style="color: #e5e7eb; margin-bottom: 5px;">
                                <strong>Ruwe Archcathedral Church</strong>
                            </p>
                            <p style="color: #9ca3af; margin-bottom: 8px;">
                                <i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i>
                                Ruwe Location
                            </p>
                            <a href="https://maps.google.com/?q=Ruwe+Archcathedral+Church+Ruwe" 
                               target="_blank" 
                               style="color: #3b82f6; text-decoration: none; font-size: 0.9em;">
                                <i class="fas fa-external-link-alt" style="margin-right: 5px;"></i>
                                View on Google Maps
                            </a>
                        </div>
                    </div>

                    <!-- King Information -->
                    <div class="col-md-6 mb-3">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 6px; border-left: 4px solid #f59e0b;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-chess-king" style="color: #f59e0b; margin-right: 8px;"></i>
                                King
                            </h6>
                            {% if king %}
                                <p style="color: #e5e7eb; margin-bottom: 5px;">
                                    <strong>{{ king.full_name }}</strong>
                                </p>
                                {% if king.phone %}
                                <p style="color: #9ca3af; margin-bottom: 5px;">
                                    <i class="fas fa-phone" style="margin-right: 5px;"></i>
                                    {{ king.phone }}
                                </p>
                                {% endif %}
                                {% if king.email %}
                                <p style="color: #9ca3af; margin-bottom: 0;">
                                    <i class="fas fa-envelope" style="margin-right: 5px;"></i>
                                    {{ king.email }}
                                </p>
                                {% endif %}
                            {% else %}
                                <p style="color: #9ca3af; font-style: italic;">
                                    <i class="fas fa-info-circle" style="margin-right: 5px;"></i>
                                    King information not available
                                </p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- King's Place Information -->
                    <div class="col-md-6 mb-3">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 6px; border-left: 4px solid #059669;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-monument" style="color: #059669; margin-right: 8px;"></i>
                                King's Place
                            </h6>
                            <p style="color: #e5e7eb; margin-bottom: 5px;">
                                <strong>The King's Pillar</strong>
                            </p>
                            <p style="color: #9ca3af; margin-bottom: 8px;">
                                <i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i>
                                Musanda Location
                            </p>
                            <a href="https://maps.google.com/?q=The+King's+Pillar+Musanda" 
                               target="_blank" 
                               style="color: #3b82f6; text-decoration: none; font-size: 0.9em;">
                                <i class="fas fa-external-link-alt" style="margin-right: 5px;"></i>
                                View on Google Maps
                            </a>
                        </div>
                    </div>

                    <!-- Bishop Information -->
                    <div class="col-md-6 mb-3">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 6px; border-left: 4px solid #6366f1;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-mitre" style="color: #6366f1; margin-right: 8px;"></i>
                                Bishop
                            </h6>
                            <p style="color: #e5e7eb; margin-bottom: 5px;">
                                <strong>{{ pastorate.diocese.bishop_name }}</strong>
                            </p>
                            {% if pastorate.diocese.bishop_phone %}
                            <p style="color: #9ca3af; margin-bottom: 5px;">
                                <i class="fas fa-phone" style="margin-right: 5px;"></i>
                                {{ pastorate.diocese.bishop_phone }}
                            </p>
                            {% endif %}
                            {% if pastorate.diocese.bishop_email %}
                            <p style="color: #9ca3af; margin-bottom: 0;">
                                <i class="fas fa-envelope" style="margin-right: 5px;"></i>
                                {{ pastorate.diocese.bishop_email }}
                            </p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Diocesan Church Information -->
                    <div class="col-md-6 mb-3">
                        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 6px; border-left: 4px solid #8b5cf6;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-church" style="color: #8b5cf6; margin-right: 8px;"></i>
                                Diocesan Church
                            </h6>
                            {% if diocesan_church %}
                                <p style="color: #e5e7eb; margin-bottom: 5px;">
                                    <strong>{{ diocesan_church.name }}</strong>
                                </p>
                                <p style="color: #9ca3af; margin-bottom: 8px;">
                                    <i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i>
                                    {{ diocesan_church.location }}
                                </p>
                                <a href="{% url 'church_structure:church_detail' church_slug=diocesan_church.slug %}"
                                   style="color: #3b82f6; text-decoration: none; font-size: 0.9em;">
                                    <i class="fas fa-eye" style="margin-right: 5px;"></i>
                                    View Church Details
                                </a>
                            {% else %}
                                <p style="color: #9ca3af; font-style: italic;">
                                    <i class="fas fa-info-circle" style="margin-right: 5px;"></i>
                                    Diocesan Church not assigned
                                </p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Churches Under This Pastorate -->
        <div class="card">
            <div class="card-header">
                <h5 class="card-title">
                    <i class="fas fa-home" style="color: #dc2626; margin-right: 10px;"></i>
                    Churches ({{ churches.count }})
                </h5>
            </div>
            <div class="card-body">
                {% if churches %}
                <div class="row">
                    {% for church in churches %}
                    <div class="col-md-6 mb-4">
                        <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; border-left: 4px solid #dc2626;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-home" style="color: #dc2626; margin-right: 8px;"></i>
                                {{ church.name }}
                            </h6>
                            <p style="color: #e5e7eb; margin-bottom: 8px;">
                                <i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i>
                                {{ church.address }}
                            </p>
                            <p style="color: #e5e7eb; margin-bottom: 8px;">
                                <strong>Head Teacher:</strong> {{ church.head_teacher_name }}
                            </p>
                            {% if church.head_teacher_phone %}
                            <p style="color: #9ca3af; margin-bottom: 8px;">
                                <i class="fas fa-phone" style="margin-right: 5px;"></i>
                                {{ church.head_teacher_phone }}
                            </p>
                            {% endif %}
                            {% if church.head_teacher_email %}
                            <p style="color: #9ca3af; margin-bottom: 8px;">
                                <i class="fas fa-envelope" style="margin-right: 5px;"></i>
                                {{ church.head_teacher_email }}
                            </p>
                            {% endif %}
                            {% if church.service_times %}
                            <p style="color: #9ca3af; margin-bottom: 15px;">
                                <i class="fas fa-clock" style="margin-right: 5px;"></i>
                                {{ church.service_times }}
                            </p>
                            {% endif %}
                            
                            {% if church.assistant_teachers %}
                            <div style="margin-top: 10px;">
                                <strong style="color: #ffffff; font-size: 0.9em;">Assistant Teachers:</strong>
                                <div style="color: #e5e7eb; font-size: 0.9em; margin-top: 5px;">
                                    {{ church.assistant_teachers|linebreaks }}
                                </div>
                            </div>
                            {% endif %}
                            
                            <div style="margin-top: 15px; text-align: right;">
                                <a href="{% url 'church_structure:church_detail' church_slug=church.slug %}" 
                                   class="btn btn-sm" style="background: #3b82f6; color: white; margin-right: 5px; padding: 4px 8px; text-decoration: none; border-radius: 4px;">
                                    <i class="fas fa-eye"></i> View
                                </a>
                                <a href="{% url 'church_structure:edit_church' church_slug=church.slug %}" 
                                   class="btn btn-sm" style="background: #f59e0b; color: white; padding: 4px 8px; text-decoration: none; border-radius: 4px;">
                                    <i class="fas fa-edit"></i> Edit
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div style="text-align: center; color: #9ca3af; font-style: italic; padding: 40px;">
                    <i class="fas fa-info-circle" style="font-size: 2rem; margin-bottom: 15px; display: block;"></i>
                    No churches in this pastorate yet.
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
