
{% extends 'base.html' %}

{% block title %}{{ pastorate.name }} Pastorate - RuweHolyGhostChurch{% endblock %}

{% block page_title %}{{ pastorate.name }} Pastorate{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- Pastorate Information Card -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title">
                    <i class="fas fa-users" style="color: #dc2626; margin-right: 10px;"></i>
                    Pastorate Information
                </h5>
                <div style="float: right;">
                    <a href="{% url 'church_structure:edit_pastorate' pastorate_slug=pastorate.slug %}" 
                       class="btn btn-primary btn-sm">
                        <i class="fas fa-edit"></i> Edit Pastorate
                    </a>
                    <a href="{% url 'church_structure:diocese_detail' diocese_slug=pastorate.diocese.slug %}" 
                       class="btn btn-primary btn-sm">
                        <i class="fas fa-church"></i> View Diocese
                    </a>
                    <a href="{% url 'church_structure:index' %}" class="btn btn-secondary btn-sm">
                        <i class="fas fa-arrow-left"></i> Back
                    </a>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Identifier:</strong> <span style="color: #22c55e; font-weight: bold;">{{ pastorate.identifier }}</span></p>
                        <p><strong>Name:</strong> {{ pastorate.name }}</p>
                        <p><strong>Diocese:</strong> 
                            <a href="{% url 'church_structure:diocese_detail' diocese_slug=pastorate.diocese.slug %}" 
                               style="color: #dc2626; text-decoration: none;">
                                {{ pastorate.diocese.name }} ({{ pastorate.diocese.country }})
                            </a>
                            <br><small style="color: #9ca3af;">ID: {{ pastorate.diocese.identifier }}</small>
                        </p>
                        <p><strong>Pastor:</strong> {{ pastorate.pastor_name }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Pastor Phone:</strong> {{ pastorate.pastor_phone|default:"Not provided" }}</p>
                        <p><strong>Pastor Email:</strong> {{ pastorate.pastor_email|default:"Not provided" }}</p>
                        <p><strong>Established:</strong> {{ pastorate.established_date|default:"Not specified" }}</p>
                    </div>
                </div>
                {% if pastorate.description %}
                <div class="row mt-3">
                    <div class="col-12">
                        <p><strong>Description:</strong></p>
                        <p>{{ pastorate.description }}</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Churches Under This Pastorate -->
        <div class="card">
            <div class="card-header">
                <h5 class="card-title">
                    <i class="fas fa-home" style="color: #dc2626; margin-right: 10px;"></i>
                    Churches ({{ churches.count }})
                </h5>
            </div>
            <div class="card-body">
                {% if churches %}
                <div class="row">
                    {% for church in churches %}
                    <div class="col-md-6 mb-4">
                        <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; border-left: 4px solid #dc2626;">
                            <h6 style="color: #ffffff; margin-bottom: 10px;">
                                <i class="fas fa-home" style="color: #dc2626; margin-right: 8px;"></i>
                                {{ church.name }}
                            </h6>
                            <p style="color: #e5e7eb; margin-bottom: 8px;">
                                <i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i>
                                {{ church.address }}
                            </p>
                            <p style="color: #e5e7eb; margin-bottom: 8px;">
                                <strong>Head Teacher:</strong> {{ church.head_teacher_name }}
                            </p>
                            {% if church.head_teacher_phone %}
                            <p style="color: #9ca3af; margin-bottom: 8px;">
                                <i class="fas fa-phone" style="margin-right: 5px;"></i>
                                {{ church.head_teacher_phone }}
                            </p>
                            {% endif %}
                            {% if church.head_teacher_email %}
                            <p style="color: #9ca3af; margin-bottom: 8px;">
                                <i class="fas fa-envelope" style="margin-right: 5px;"></i>
                                {{ church.head_teacher_email }}
                            </p>
                            {% endif %}
                            {% if church.service_times %}
                            <p style="color: #9ca3af; margin-bottom: 15px;">
                                <i class="fas fa-clock" style="margin-right: 5px;"></i>
                                {{ church.service_times }}
                            </p>
                            {% endif %}
                            
                            {% if church.assistant_teachers %}
                            <div style="margin-top: 10px;">
                                <strong style="color: #ffffff; font-size: 0.9em;">Assistant Teachers:</strong>
                                <div style="color: #e5e7eb; font-size: 0.9em; margin-top: 5px;">
                                    {{ church.assistant_teachers|linebreaks }}
                                </div>
                            </div>
                            {% endif %}
                            
                            <div style="margin-top: 15px; text-align: right;">
                                <a href="{% url 'church_structure:church_detail' church_slug=church.slug %}" 
                                   class="btn btn-sm" style="background: #3b82f6; color: white; margin-right: 5px; padding: 4px 8px; text-decoration: none; border-radius: 4px;">
                                    <i class="fas fa-eye"></i> View
                                </a>
                                <a href="{% url 'church_structure:edit_church' church_slug=church.slug %}" 
                                   class="btn btn-sm" style="background: #f59e0b; color: white; padding: 4px 8px; text-decoration: none; border-radius: 4px;">
                                    <i class="fas fa-edit"></i> Edit
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div style="text-align: center; color: #9ca3af; font-style: italic; padding: 40px;">
                    <i class="fas fa-info-circle" style="font-size: 2rem; margin-bottom: 15px; display: block;"></i>
                    No churches in this pastorate yet.
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
